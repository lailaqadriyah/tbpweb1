<%- include('./partials/layoutStart.ejs') %>
<%- include('./partials/aside.ejs') %>

<div class="flex-1 p-6 bg-gray-100 min-h-screen">
  <div class="max-w-5xl mx-auto bg-white rounded-lg shadow-md p-6">
    
    <!-- Judul dan Filter -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 space-y-4 md:space-y-0">
      <h1 class="text-xl font-semibold text-gray-800">Riwayat Aktivitas Sistem</h1>

      <div class="flex flex-col md:flex-row md:items-center gap-2 w-full md:w-auto">
        <input
          type="text"
          placeholder="Filter berdasarkan kata kunci..."
          class="border border-gray-300 rounded-md px-3 py-2 text-sm w-full md:w-56 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <input
          type="date"
          class="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <select
          class="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option>Semua Tipe</option>
          <option>CREATE</option>
          <option>UPDATE</option>
          <option>EXPORT</option>
          <option>SUBMIT</option>
          <option>DELETE</option>
          <option>LOGIN</option>
        </select>
        <button class="bg-[#0D1F4B] text-white px-4 py-2 rounded-md text-sm hover:bg-blue-800 transition">
          Terapkan Filter
        </button>
      </div>
    </div>

    <!-- Daftar Riwayat -->
    <div class="space-y-4">
      <% if (aktivitas.length === 0) { %>
        <div class="text-center text-gray-500">Belum ada aktivitas tercatat.</div>
      <% } else { %>
        <% aktivitas.forEach(item => { %>
          <div class="bg-gray-50 border border-gray-200 rounded-md p-4">
            <p class="text-sm text-gray-700 mb-1">
              Pengguna <span class="font-medium"><%= item.pengguna %></span> - <%= item.deskripsi %>
            </p>
            <div class="flex items-center justify-between text-xs text-gray-500">
              <div class="flex items-center space-x-2">
                <span class="inline-block w-2 h-2 bg-gray-400 rounded-full"></span>
                <span><%= item.waktu.toISOString().replace('T', ' ').slice(0, 19) %></span>
              </div>
              <span class="font-semibold uppercase tracking-wide 
                <%= item.tipe === 'CREATE' ? 'text-green-500' :
                    item.tipe === 'UPDATE' ? 'text-yellow-500' :
                    item.tipe === 'EXPORT' ? 'text-purple-500' :
                    item.tipe === 'SUBMIT' ? 'text-blue-500' :
                    item.tipe === 'DELETE' ? 'text-red-500' :
                    'text-gray-500' %>">
                <%= item.tipe %>
              </span>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>
  </div>
</div>

<%- include('./partials/closeAside.ejs') %>
